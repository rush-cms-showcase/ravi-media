---
import Button from "@/components/ui/button.astro"
import { Icon } from "astro-icon/components"

interface Props {
    badge?: {
        text: string
        color: string
    }
    title: string
    titleHighlight?: {
        text: string
        color: string
    }
    subtitle: string
    primaryButton: {
        text: string
        href: string
        color?: string
    }
    secondaryButton: {
        text: string
        href: string
    }
    checkText: string
    checkColor?: string
    bgColor: string
    topBadge?: {
        icon: string
        label: string
        value: string
        color: string
    }
    bottomIcon?: {
        name: string
        bgColor: string
    }
    stats?: Array<{
        icon: string
        text: string
    }>
    statsLabel?: string
}

const {
    badge,
    title,
    titleHighlight,
    subtitle,
    primaryButton,
    secondaryButton,
    checkText,
    checkColor = "primary",
    bgColor,
    topBadge,
    bottomIcon,
    stats,
    statsLabel = "Otimizado para:"
} = Astro.props
---

<section class="relative min-h-screen flex items-center pt-32 pb-20 overflow-hidden">
    <div class={`absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] ${bgColor} blur-[120px] rounded-full pointer-events-none opacity-30`}></div>

    <div class="container mx-auto px-4 relative z-10">
        <div class="flex flex-col-reverse lg:grid lg:grid-cols-2 gap-12 items-center">
            <div class="space-y-8 text-center lg:text-left">
                {badge && (
                    <div class={`inline-flex items-center gap-2 px-3 py-1 rounded-full bg-${badge.color}-500/10 border border-${badge.color}-500/20 text-xs font-mono text-${badge.color}-400`}>
                        <span class="relative flex h-2 w-2">
                            <span class={`animate-ping absolute inline-flex h-full w-full rounded-full bg-${badge.color}-500 opacity-75`}></span>
                            <span class={`relative inline-flex rounded-full h-2 w-2 bg-${badge.color}-500`}></span>
                        </span>
                        {badge.text}
                    </div>
                )}

                <h1 class="text-4xl lg:text-6xl font-display font-bold leading-tight tracking-tight">
                    <Fragment set:html={title} />
                    {titleHighlight && (
                        <span class={`bg-${titleHighlight.color}-500/10 px-2 rounded-lg text-${titleHighlight.color}-500`}>
                            {titleHighlight.text}
                        </span>
                    )}
                </h1>

                <p class="text-xl text-gray-400 max-w-2xl mx-auto lg:mx-0 leading-relaxed">
                    {subtitle}
                </p>

                <div class="flex flex-col sm:flex-row items-center gap-4 justify-center lg:justify-start">
                    <Button
                        href={primaryButton.href}
                        variant="primary"
                        class={`w-full sm:w-auto text-lg px-8 py-4 ${primaryButton.color || ''}`}
                    >
                        {primaryButton.text}
                    </Button>
                    <Button
                        href={secondaryButton.href}
                        variant="secondary"
                        class="w-full sm:w-auto text-lg px-8 py-4"
                    >
                        {secondaryButton.text}
                    </Button>
                </div>

                <p class="text-sm text-gray-500 flex items-center justify-center lg:justify-start gap-2">
                    <Icon name="lucide:check" class={`w-4 h-4 text-${checkColor}`} />
                    {checkText}
                </p>
            </div>

            <div class="hidden lg:block relative">
                <div class="relative z-10 bg-surface border border-white/10 rounded-2xl p-2 shadow-2xl lg:rotate-1 lg:hover:rotate-0 transition-transform duration-700">
                    <div class="aspect-video bg-black/50 rounded-lg relative">
                        <slot name="simulator" />

                        {topBadge && (
                            <div class="absolute -top-6 -left-6 bg-slate-900/40 backdrop-blur-xl border border-white/20 p-4 rounded-xl shadow-2xl flex items-center gap-4">
                                <div class={`w-10 h-10 bg-${topBadge.color}-500/20 rounded-full flex items-center justify-center text-${topBadge.color}-500`}>
                                    <Icon name={topBadge.icon} class="w-5 h-5" />
                                </div>
                                <div>
                                    <div class="text-xs text-gray-400">{topBadge.label}</div>
                                    <div class="font-bold text-white">{topBadge.value}</div>
                                </div>
                            </div>
                        )}

                        {bottomIcon && (
                            <div class={`absolute -bottom-6 -right-6 ${bottomIcon.bgColor} p-3 rounded-full shadow-xl shadow-black/50`}>
                                <Icon name={bottomIcon.name} class="w-8 h-8 text-white" />
                            </div>
                        )}
                    </div>
                </div>

                <div class={`absolute -inset-4 ${bgColor.replace('bg-', 'bg-').replace('/20', '/20')} blur-xl -z-10 rounded-2xl lg:rotate-3`}></div>
            </div>
        </div>

        {stats && stats.length > 0 && (
            <div class="mt-20 pt-10 border-t border-white/5 flex flex-col md:flex-row items-center justify-end gap-6 text-gray-500 text-sm">
                <p>{statsLabel}</p>
                <div class="flex flex-wrap justify-center gap-8 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
                    {stats.map(stat => (
                        <span class="font-bold flex items-center gap-2">
                            <Icon name={stat.icon} class="w-4 h-4" />
                            {stat.text}
                        </span>
                    ))}
                </div>
            </div>
        )}
    </div>
</section>
